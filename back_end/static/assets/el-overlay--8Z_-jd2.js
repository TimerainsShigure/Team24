import{M as $e,b as Q,aa as me,H as V,a2 as Ue,O as Z,q as Ye,ab as He,w as Y,ac as Ke,Q as ee,r as k,e as H,D as ke,l as a,x as O,n as ae,i as Ve,I as K,a1 as ze,a as pe,c as P,o as U,p as te,j as q,k as N,z as Xe,h as B,f as le,B as We,A as re,C as Oe,g as qe,u as je,m as Ge,U as xe,a9 as Ze,W as Je,X as Qe,Y as et}from"./index-DDUTDMAD.js";import{a5 as ue,P as tt,q as ie,z as G,O as Ee,an as ot,M as nt,N as st,_ as ce,H as at,r as de,s as x,W as lt,ae as rt,V as ut,ao as it,U as Ie,g as ct,I as dt,L as ye,ap as ft,aq as vt,X as be,p as mt,w as pt}from"./el-input-B8xNxJve.js";import{a as Et}from"./scroll-CLntsgrV.js";import{d as De}from"./el-form-item-DFJaNJEN.js";function yt(e){return e===void 0}const bt=(...e)=>t=>{e.forEach(n=>{$e(n)?n(t):n.value=t})};var j=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(j||{});const oe=e=>{const t=Q(e)?e:[e],n=[];return t.forEach(s=>{var l;Q(s)?n.push(...oe(s)):me(s)&&Q(s.children)?n.push(...oe(s.children)):(n.push(s),me(s)&&((l=s.component)!=null&&l.subTree)&&n.push(...oe(s.component.subTree)))}),n},Tt=(e,t,n,s)=>{let l={offsetX:0,offsetY:0};const i=b=>{const v=b.clientX,T=b.clientY,{offsetX:C,offsetY:S}=l,p=e.value.getBoundingClientRect(),o=p.left,u=p.top,m=p.width,E=p.height,y=document.documentElement.clientWidth,F=document.documentElement.clientHeight,_=-o+C,I=-u+S,D=y-o-m+C,L=F-u-E+S,g=r=>{let w=C+r.clientX-v,f=S+r.clientY-T;s!=null&&s.value||(w=Math.min(Math.max(w,_),D),f=Math.min(Math.max(f,I),L)),l={offsetX:w,offsetY:f},e.value&&(e.value.style.transform=`translate(${ue(w)}, ${ue(f)})`)},A=()=>{document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",A)};document.addEventListener("mousemove",g),document.addEventListener("mouseup",A)},c=()=>{t.value&&e.value&&t.value.addEventListener("mousedown",i)},d=()=>{t.value&&e.value&&t.value.removeEventListener("mousedown",i)};V(()=>{Ue(()=>{n.value?c():d()})}),Z(()=>{d()})},Ct=(e,t={})=>{Ye(e)||tt("[useLockscreen]","You need to pass a ref param to this function");const n=t.ns||ie("popup"),s=He(()=>n.bm("parent","hidden"));if(!G||Ee(document.body,s.value))return;let l=0,i=!1,c="0";const d=()=>{setTimeout(()=>{st(document==null?void 0:document.body,s.value),i&&document&&(document.body.style.width=c)},200)};Y(e,b=>{if(!b){d();return}i=!Ee(document.body,s.value),i&&(c=document.body.style.width),l=Et(n.namespace.value);const v=document.documentElement.clientHeight<document.body.scrollHeight,T=ot(document.body,"overflowY");l>0&&(v||T==="scroll")&&i&&(document.body.style.width=`calc(100% - ${l}px)`),nt(document.body,s.value)}),Ke(()=>d())},Fe=e=>{if(!e)return{onClick:ee,onMousedown:ee,onMouseup:ee};let t=!1,n=!1;return{onClick:c=>{t&&n&&e(c),t=n=!1},onMousedown:c=>{t=c.target===c.currentTarget},onMouseup:c=>{n=c.target===c.currentTarget}}};let $=[];const Te=e=>{const t=e;t.key===De.esc&&$.forEach(n=>n(t))},gt=e=>{V(()=>{$.length===0&&document.addEventListener("keydown",Te),G&&$.push(e)}),Z(()=>{$=$.filter(t=>t!==e),$.length===0&&G&&document.removeEventListener("keydown",Te)})},ne="focus-trap.focus-after-trapped",se="focus-trap.focus-after-released",St="focus-trap.focusout-prevented",Ce={cancelable:!0,bubbles:!1},wt={cancelable:!0,bubbles:!1},ge="focusAfterTrapped",Se="focusAfterReleased",_e=Symbol("elFocusTrap"),fe=k(),J=k(0),ve=k(0);let z=0;const Ne=e=>{const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const l=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||l?NodeFilter.FILTER_SKIP:s.tabIndex>=0||s===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t},we=(e,t)=>{for(const n of e)if(!Lt(n,t))return n},Lt=(e,t)=>{if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1},ht=e=>{const t=Ne(e),n=we(t,e),s=we(t.reverse(),e);return[n,s]},At=e=>e instanceof HTMLInputElement&&"select"in e,M=(e,t)=>{if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),ve.value=window.performance.now(),e!==n&&At(e)&&t&&e.select()}};function Le(e,t){const n=[...e],s=e.indexOf(t);return s!==-1&&n.splice(s,1),n}const kt=()=>{let e=[];return{push:s=>{const l=e[0];l&&s!==l&&l.pause(),e=Le(e,s),e.unshift(s)},remove:s=>{var l,i;e=Le(e,s),(i=(l=e[0])==null?void 0:l.resume)==null||i.call(l)}}},Ot=(e,t=!1)=>{const n=document.activeElement;for(const s of e)if(M(s,t),document.activeElement!==n)return},he=kt(),It=()=>J.value>ve.value,X=()=>{fe.value="pointer",J.value=window.performance.now()},Ae=()=>{fe.value="keyboard",J.value=window.performance.now()},Dt=()=>(V(()=>{z===0&&(document.addEventListener("mousedown",X),document.addEventListener("touchstart",X),document.addEventListener("keydown",Ae)),z++}),Z(()=>{z--,z<=0&&(document.removeEventListener("mousedown",X),document.removeEventListener("touchstart",X),document.removeEventListener("keydown",Ae))}),{focusReason:fe,lastUserFocusTimestamp:J,lastAutomatedFocusTimestamp:ve}),W=e=>new CustomEvent(St,{...wt,detail:e}),Ft=H({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[ge,Se,"focusin","focusout","focusout-prevented","release-requested"],setup(e,{emit:t}){const n=k();let s,l;const{focusReason:i}=Dt();gt(o=>{e.trapped&&!c.paused&&t("release-requested",o)});const c={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},d=o=>{if(!e.loop&&!e.trapped||c.paused)return;const{key:u,altKey:m,ctrlKey:E,metaKey:y,currentTarget:F,shiftKey:_}=o,{loop:I}=e,D=u===De.tab&&!m&&!E&&!y,L=document.activeElement;if(D&&L){const g=F,[A,r]=ht(g);if(A&&r){if(!_&&L===r){const f=W({focusReason:i.value});t("focusout-prevented",f),f.defaultPrevented||(o.preventDefault(),I&&M(A,!0))}else if(_&&[A,g].includes(L)){const f=W({focusReason:i.value});t("focusout-prevented",f),f.defaultPrevented||(o.preventDefault(),I&&M(r,!0))}}else if(L===g){const f=W({focusReason:i.value});t("focusout-prevented",f),f.defaultPrevented||o.preventDefault()}}};ke(_e,{focusTrapRef:n,onKeydown:d}),Y(()=>e.focusTrapEl,o=>{o&&(n.value=o)},{immediate:!0}),Y([n],([o],[u])=>{o&&(o.addEventListener("keydown",d),o.addEventListener("focusin",T),o.addEventListener("focusout",C)),u&&(u.removeEventListener("keydown",d),u.removeEventListener("focusin",T),u.removeEventListener("focusout",C))});const b=o=>{t(ge,o)},v=o=>t(Se,o),T=o=>{const u=a(n);if(!u)return;const m=o.target,E=o.relatedTarget,y=m&&u.contains(m);e.trapped||E&&u.contains(E)||(s=E),y&&t("focusin",o),!c.paused&&e.trapped&&(y?l=m:M(l,!0))},C=o=>{const u=a(n);if(!(c.paused||!u))if(e.trapped){const m=o.relatedTarget;!at(m)&&!u.contains(m)&&setTimeout(()=>{if(!c.paused&&e.trapped){const E=W({focusReason:i.value});t("focusout-prevented",E),E.defaultPrevented||M(l,!0)}},0)}else{const m=o.target;m&&u.contains(m)||t("focusout",o)}};async function S(){await ae();const o=a(n);if(o){he.push(c);const u=o.contains(document.activeElement)?s:document.activeElement;if(s=u,!o.contains(u)){const E=new Event(ne,Ce);o.addEventListener(ne,b),o.dispatchEvent(E),E.defaultPrevented||ae(()=>{let y=e.focusStartEl;Ve(y)||(M(y),document.activeElement!==y&&(y="first")),y==="first"&&Ot(Ne(o),!0),(document.activeElement===u||y==="container")&&M(o)})}}}function p(){const o=a(n);if(o){o.removeEventListener(ne,b);const u=new CustomEvent(se,{...Ce,detail:{focusReason:i.value}});o.addEventListener(se,v),o.dispatchEvent(u),!u.defaultPrevented&&(i.value=="keyboard"||!It()||o.contains(document.activeElement))&&M(s??document.body),o.removeEventListener(se,v),he.remove(c)}}return V(()=>{e.trapped&&S(),Y(()=>e.trapped,o=>{o?S():p()})}),Z(()=>{e.trapped&&p()}),{onKeydown:d}}});function _t(e,t,n,s,l,i){return O(e.$slots,"default",{handleKeydown:e.onKeydown})}var Nt=ce(Ft,[["render",_t],["__file","focus-trap.vue"]]);const Mt=de({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:x([String,Array,Object])},zIndex:{type:x([String,Number])}}),Rt={click:e=>e instanceof MouseEvent},Bt="overlay";var Pt=H({name:"ElOverlay",props:Mt,emits:Rt,setup(e,{slots:t,emit:n}){const s=ie(Bt),l=b=>{n("click",b)},{onClick:i,onMousedown:c,onMouseup:d}=Fe(e.customMaskEvent?void 0:l);return()=>e.mask?K("div",{class:[s.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:i,onMousedown:c,onMouseup:d},[O(t,"default")],j.STYLE|j.CLASS|j.PROPS,["onClick","onMouseup","onMousedown"]):ze("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[O(t,"default")])}});const $t=Pt,Me=Symbol("dialogInjectionKey"),Re=de({center:Boolean,alignCenter:Boolean,closeIcon:{type:lt},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),Ut={close:()=>!0},Yt=["aria-level"],Ht=["aria-label"],Kt=["id"],Vt=H({name:"ElDialogContent"}),zt=H({...Vt,props:Re,emits:Ut,setup(e){const t=e,{t:n}=rt(),{Close:s}=it,{dialogRef:l,headerRef:i,bodyId:c,ns:d,style:b}=pe(Me),{focusTrapRef:v}=pe(_e),T=P(()=>[d.b(),d.is("fullscreen",t.fullscreen),d.is("draggable",t.draggable),d.is("align-center",t.alignCenter),{[d.m("center")]:t.center}]),C=bt(v,l),S=P(()=>t.draggable),p=P(()=>t.overflow);return Tt(l,i,S,p),(o,u)=>(U(),te("div",{ref:a(C),class:N(a(T)),style:Oe(a(b)),tabindex:"-1"},[q("header",{ref_key:"headerRef",ref:i,class:N([a(d).e("header"),{"show-close":o.showClose}])},[O(o.$slots,"header",{},()=>[q("span",{role:"heading","aria-level":o.ariaLevel,class:N(a(d).e("title"))},Xe(o.title),11,Yt)]),o.showClose?(U(),te("button",{key:0,"aria-label":a(n)("el.dialog.close"),class:N(a(d).e("headerbtn")),type:"button",onClick:u[0]||(u[0]=m=>o.$emit("close"))},[K(a(ut),{class:N(a(d).e("close"))},{default:B(()=>[(U(),le(We(o.closeIcon||a(s))))]),_:1},8,["class"])],10,Ht)):re("v-if",!0)],2),q("div",{id:a(c),class:N(a(d).e("body"))},[O(o.$slots,"default")],10,Kt),o.$slots.footer?(U(),te("footer",{key:0,class:N(a(d).e("footer"))},[O(o.$slots,"footer")],2)):re("v-if",!0)],6))}});var Xt=ce(zt,[["__file","dialog-content.vue"]]);const Wt=de({...Re,appendToBody:Boolean,appendTo:{type:x(String),default:"body"},beforeClose:{type:x(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1},headerAriaLevel:{type:String,default:"2"}}),qt={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[Ie]:e=>ct(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},jt=(e,t)=>{var n;const l=qe().emit,{nextZIndex:i}=dt();let c="";const d=ye(),b=ye(),v=k(!1),T=k(!1),C=k(!1),S=k((n=e.zIndex)!=null?n:i());let p,o;const u=ft("namespace",vt),m=P(()=>{const h={},R=`--${u.value}-dialog`;return e.fullscreen||(e.top&&(h[`${R}-margin-top`]=e.top),e.width&&(h[`${R}-width`]=ue(e.width))),h}),E=P(()=>e.alignCenter?{display:"flex"}:{});function y(){l("opened")}function F(){l("closed"),l(Ie,!1),e.destroyOnClose&&(C.value=!1)}function _(){l("close")}function I(){o==null||o(),p==null||p(),e.openDelay&&e.openDelay>0?{stop:p}=be(()=>A(),e.openDelay):A()}function D(){p==null||p(),o==null||o(),e.closeDelay&&e.closeDelay>0?{stop:o}=be(()=>r(),e.closeDelay):r()}function L(){function h(R){R||(T.value=!0,v.value=!1)}e.beforeClose?e.beforeClose(h):D()}function g(){e.closeOnClickModal&&L()}function A(){G&&(v.value=!0)}function r(){v.value=!1}function w(){l("openAutoFocus")}function f(){l("closeAutoFocus")}function Be(h){var R;((R=h.detail)==null?void 0:R.focusReason)==="pointer"&&h.preventDefault()}e.lockScroll&&Ct(v);function Pe(){e.closeOnPressEscape&&L()}return Y(()=>e.modelValue,h=>{h?(T.value=!1,I(),C.value=!0,S.value=yt(e.zIndex)?i():S.value++,ae(()=>{l("open"),t.value&&(t.value.scrollTop=0)})):v.value&&D()}),Y(()=>e.fullscreen,h=>{t.value&&(h?(c=t.value.style.transform,t.value.style.transform=""):t.value.style.transform=c)}),V(()=>{e.modelValue&&(v.value=!0,C.value=!0,I())}),{afterEnter:y,afterLeave:F,beforeLeave:_,handleClose:L,onModalClick:g,close:D,doClose:r,onOpenAutoFocus:w,onCloseAutoFocus:f,onCloseRequested:Pe,onFocusoutPrevented:Be,titleId:d,bodyId:b,closed:T,style:m,overlayDialogStyle:E,rendered:C,visible:v,zIndex:S}},Gt=["aria-label","aria-labelledby","aria-describedby"],xt=H({name:"ElDialog",inheritAttrs:!1}),Zt=H({...xt,props:Wt,emits:qt,setup(e,{expose:t}){const n=e,s=je();mt({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},P(()=>!!s.title));const l=ie("dialog"),i=k(),c=k(),d=k(),{visible:b,titleId:v,bodyId:T,style:C,overlayDialogStyle:S,rendered:p,zIndex:o,afterEnter:u,afterLeave:m,beforeLeave:E,handleClose:y,onModalClick:F,onOpenAutoFocus:_,onCloseAutoFocus:I,onCloseRequested:D,onFocusoutPrevented:L}=jt(n,i);ke(Me,{dialogRef:i,headerRef:c,bodyId:T,ns:l,rendered:p,style:C});const g=Fe(F),A=P(()=>n.draggable&&!n.fullscreen);return t({visible:b,dialogContentRef:d}),(r,w)=>(U(),le(et,{to:r.appendTo,disabled:r.appendTo!=="body"?!1:!r.appendToBody},[K(Qe,{name:"dialog-fade",onAfterEnter:a(u),onAfterLeave:a(m),onBeforeLeave:a(E),persisted:""},{default:B(()=>[Ge(K(a($t),{"custom-mask-event":"",mask:r.modal,"overlay-class":r.modalClass,"z-index":a(o)},{default:B(()=>[q("div",{role:"dialog","aria-modal":"true","aria-label":r.title||void 0,"aria-labelledby":r.title?void 0:a(v),"aria-describedby":a(T),class:N(`${a(l).namespace.value}-overlay-dialog`),style:Oe(a(S)),onClick:w[0]||(w[0]=(...f)=>a(g).onClick&&a(g).onClick(...f)),onMousedown:w[1]||(w[1]=(...f)=>a(g).onMousedown&&a(g).onMousedown(...f)),onMouseup:w[2]||(w[2]=(...f)=>a(g).onMouseup&&a(g).onMouseup(...f))},[K(a(Nt),{loop:"",trapped:a(b),"focus-start-el":"container",onFocusAfterTrapped:a(_),onFocusAfterReleased:a(I),onFocusoutPrevented:a(L),onReleaseRequested:a(D)},{default:B(()=>[a(p)?(U(),le(Xt,xe({key:0,ref_key:"dialogContentRef",ref:d},r.$attrs,{center:r.center,"align-center":r.alignCenter,"close-icon":r.closeIcon,draggable:a(A),overflow:r.overflow,fullscreen:r.fullscreen,"show-close":r.showClose,title:r.title,"aria-level":r.headerAriaLevel,onClose:a(y)}),Ze({header:B(()=>[r.$slots.title?O(r.$slots,"title",{key:1}):O(r.$slots,"header",{key:0,close:a(y),titleId:a(v),titleClass:a(l).e("title")})]),default:B(()=>[O(r.$slots,"default")]),_:2},[r.$slots.footer?{name:"footer",fn:B(()=>[O(r.$slots,"footer")])}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","show-close","title","aria-level","onClose"])):re("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,Gt)]),_:3},8,["mask","overlay-class","z-index"]),[[Je,a(b)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["to","disabled"]))}});var Jt=ce(Zt,[["__file","dialog.vue"]]);const no=pt(Jt);export{Nt as E,no as a,oe as f,yt as i};
