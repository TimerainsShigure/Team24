import{E as V,x}from"./el-input-B8xNxJve.js";import{E as y,c as A}from"./el-form-item-DFJaNJEN.js";import{_ as I}from"./myqrcode-AEGVHUEh.js";import{s as q}from"./index-CMI59eta.js";import{_ as b,r as p,G as g,o as S,p as U,j as t,I as r,h as n,y as z,J as B,K as C,L as P}from"./index-DDUTDMAD.js";import{E as _}from"./index-Ca6jGdRA.js";const w=i=>(B("data-v-ee91a827"),i=i(),C(),i),Z={class:"login"},N=w(()=>t("div",{class:"title"},"Sign",-1)),T={class:"box"},$=w(()=>t("div",null,[t("div",{style:{width:"200px",height:"230px"}},[t("img",{style:{width:"100%",height:"100%"},src:I})])],-1)),j={class:"commit"},F={__name:"sign",setup(i){const c=P(),u=p(!1),s=g({username:"",password:"",passwordAgain:"",email:""}),f=g({username:[{required:!0,trigger:"change"}],password:[{required:!0,trigger:"change"}],passwordAgain:[{validator:(d,e,o)=>{e?s.password!==s.passwordAgain?o(new Error("Two passwords do not match")):o():o(new Error("password is required"))},trigger:"change",required:!0}],email:[{validator:(d,e,o)=>{if(!e)return o(new Error("email is required"));if(e.length>128||e.length<6)return o(new Error("length error"));var l=/^[A-Za-z0-9+]+[A-Za-z0-9\.\_\-+]*@([A-Za-z0-9\-]+\.)+[A-Za-z0-9]+$/;return e.match(l)?o():o(new Error("Incorrect format error"))},trigger:"change",required:!0}]}),m=p(null),h=d=>{d.validate().then(()=>{u.value=!0;let e={u_name:s.username,u_password:s.password,u_mail:s.email,is_super:!1};return q(e)}).then(()=>{_.success({message:"Congratulations, registration successful",type:"success"}),setTimeout(()=>{c.push({name:"login"})},2e3)}).catch(()=>{_.error({message:"Please do not register again",type:"error"})}).finally(()=>{u.value=!1})};return(d,e)=>{const o=x,l=A,v=y,E=V;return S(),U("div",Z,[N,t("div",T,[$,t("div",null,[t("div",null,[r(v,{rules:f,"label-width":130,model:s,ref_key:"box",ref:m},{default:n(()=>[r(l,{label:"email",prop:"email"},{default:n(()=>[r(o,{modelValue:s.email,"onUpdate:modelValue":e[0]||(e[0]=a=>s.email=a)},null,8,["modelValue"])]),_:1}),r(l,{label:"Username",prop:"username"},{default:n(()=>[r(o,{modelValue:s.username,"onUpdate:modelValue":e[1]||(e[1]=a=>s.username=a)},null,8,["modelValue"])]),_:1}),r(l,{label:"Password",prop:"password"},{default:n(()=>[r(o,{type:"password","show-password":"",modelValue:s.password,"onUpdate:modelValue":e[2]||(e[2]=a=>s.password=a)},null,8,["modelValue"])]),_:1}),r(l,{label:"password again",prop:"passwordAgain"},{default:n(()=>[r(o,{type:"password","show-password":"",modelValue:s.passwordAgain,"onUpdate:modelValue":e[3]||(e[3]=a=>s.passwordAgain=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","model"]),t("div",j,[r(E,{loading:u.value,style:{width:"200px",height:"50px"},onClick:e[4]||(e[4]=a=>h(m.value))},{default:n(()=>[z("Continue")]),_:1},8,["loading"])])])])])])}}},O=b(F,[["__scopeId","data-v-ee91a827"]]);export{O as default};
